<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Mocha Suit by muonjs</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Mocha Suit</h1>
      <h2 class="project-tagline">Mocha Suit - the way to improve your tests.</h2>
      <a href="https://github.com/muonjs/mocha-suit" class="btn">View on GitHub</a>
      <a href="https://github.com/muonjs/mocha-suit/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/muonjs/mocha-suit/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h1>
<a id="mocha-suit---the-way-to-improve-your-tests" class="anchor" href="#mocha-suit---the-way-to-improve-your-tests" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Mocha Suit - the way to improve your tests.</h1>

<p>It's a simple wrapper for your Mocha tests to make them a bit more OOP like.</p>

<hr>

<h2>
<a id="motivation" class="anchor" href="#motivation" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Motivation</h2>

<p>The main rule of any test you create is <em>TEST should be simple as much as posible</em>.
Unfortunately JavaScript which is my the most loved programing language is so elegant and simple that sometimes it's become a problem when you create something  more or less complicated.</p>

<p>To be honest all we know JS is object oriented language just partially. This is the reason why it's not so easy to create test framework on JavaScript so cool as for example jUnit in Java. In most cases it's ok to follow algorithmic approach with all these <em>describes</em>/<em>before</em>/<em>it</em>/<em>after</em> when you create some simple stuff. But basically it does not encourage you to reuse your code. And at some point you start to share your variables and methods between your <em>describes</em> in common closure or (ohh no!) in global object. Then you create your own wrappers upon test modules, move  helpers from neighboring modules and so on. And finally you reinvent the wheel and create your own test generation script. </p>

<p>So I did. Almost did</p>

<h2>
<a id="installation" class="anchor" href="#installation" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Installation</h2>

<div class="highlight highlight-source-shell"><pre><span class="pl-c"># from NPM</span>
$ npm install --save-dev mocha-suit

<span class="pl-c"># last version from GIT</span>
$ git clone https://github.com/muonjs/mocha-suit.git
$ <span class="pl-c1">cd</span> ../mocha-suit
$ sudo npm link <span class="pl-c1">.</span>
$ <span class="pl-c1">cd</span> <span class="pl-k">~</span>/PathToYourSuperProject
$ npm link mocha-suit</pre></div>

<h2>
<a id="description" class="anchor" href="#description" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Description</h2>

<p>Mocha Suit is the wrapper upon the <a href="http://mochajs.org/">Mocha</a> test framework. It helps you to incapsulate your tests within the class object (named <strong>Suit</strong>) with it's own setup (<code>before</code> and <code>beforeEach</code>), teardown (<code>after</code> and <code>afterEach</code>) methods and testcases (<code>it</code>) themselves. Literally Suit is a <code>describe</code> block of Mocha with it's own testcases.</p>

<div class="highlight highlight-source-js"><pre><span class="pl-k">var</span> MochaSuit <span class="pl-k">=</span> <span class="pl-c1">require</span>(<span class="pl-s"><span class="pl-pds">"</span>mocha-suit<span class="pl-pds">"</span></span>);
<span class="pl-k">var</span> Suit <span class="pl-k">=</span> <span class="pl-en">MochaSuit</span>(<span class="pl-s"><span class="pl-pds">"</span>Your first test suit<span class="pl-pds">"</span></span>);
<span class="pl-smi">Suit</span>.<span class="pl-en">before</span>(<span class="pl-k">function</span>() { <span class="pl-k">...</span> });
<span class="pl-smi">Suit</span>.<span class="pl-en">it</span>(<span class="pl-s"><span class="pl-pds">"</span>test it!<span class="pl-pds">"</span></span>,<span class="pl-k">function</span>() { <span class="pl-k">...</span> });
<span class="pl-smi">Suit</span>.<span class="pl-en">after</span>(<span class="pl-k">function</span>() { <span class="pl-k">...</span> });
<span class="pl-k">new</span> <span class="pl-en">Suit</span>();
<span class="pl-c">/* ----------- will generate ----------- */</span>
<span class="pl-en">describe</span>(<span class="pl-s"><span class="pl-pds">"</span>Your first test suit<span class="pl-pds">"</span></span>,<span class="pl-k">function</span>() {
    <span class="pl-en">before</span>(<span class="pl-k">function</span>() { <span class="pl-k">...</span> });
    <span class="pl-en">it</span>(<span class="pl-s"><span class="pl-pds">"</span>test it!<span class="pl-pds">"</span></span>,<span class="pl-k">function</span>() { <span class="pl-k">...</span> });
    <span class="pl-en">after</span>(<span class="pl-k">function</span>() { <span class="pl-k">...</span> });
});</pre></div>

<p>Suit could be extended to new sub suit, that means you place another <code>describe</code> block inside of top one.</p>

<div class="highlight highlight-source-js"><pre><span class="pl-k">var</span> MochaSuit <span class="pl-k">=</span> <span class="pl-c1">require</span>(<span class="pl-s"><span class="pl-pds">"</span>mocha-suit<span class="pl-pds">"</span></span>);
<span class="pl-k">var</span> TopSuit <span class="pl-k">=</span> <span class="pl-en">MochaSuit</span>(<span class="pl-s"><span class="pl-pds">"</span>Top test suit<span class="pl-pds">"</span></span>);
<span class="pl-smi">TopSuit</span>.<span class="pl-en">before</span>(<span class="pl-k">function</span>() { <span class="pl-k">...</span> });

<span class="pl-k">var</span> Suit <span class="pl-k">=</span> <span class="pl-smi">TopSuit</span>.<span class="pl-en">extend</span>(<span class="pl-s"><span class="pl-pds">"</span>Some specific suit<span class="pl-pds">"</span></span>);
<span class="pl-smi">Suit</span>.<span class="pl-en">before</span>(<span class="pl-k">function</span>() { <span class="pl-k">...</span> });
<span class="pl-smi">Suit</span>.<span class="pl-en">it</span>(<span class="pl-s"><span class="pl-pds">"</span>test it!<span class="pl-pds">"</span></span>,<span class="pl-k">function</span>() { <span class="pl-k">...</span> });
<span class="pl-smi">Suit</span>.<span class="pl-en">after</span>(<span class="pl-k">function</span>() { <span class="pl-k">...</span> });
<span class="pl-k">new</span> <span class="pl-en">Suit</span>();
<span class="pl-c">/* ----------- will generate ----------- */</span>
<span class="pl-en">describe</span>(<span class="pl-s"><span class="pl-pds">"</span>Top test suit<span class="pl-pds">"</span></span>,<span class="pl-k">function</span>() {
    <span class="pl-en">before</span>(<span class="pl-k">function</span>() { <span class="pl-k">...</span> });
    <span class="pl-en">describe</span>(<span class="pl-s"><span class="pl-pds">"</span>Some specific suit<span class="pl-pds">"</span></span>,<span class="pl-k">function</span>() {
        <span class="pl-en">before</span>(<span class="pl-k">function</span>() { <span class="pl-k">...</span> });
        <span class="pl-en">it</span>(<span class="pl-s"><span class="pl-pds">"</span>test it!<span class="pl-pds">"</span></span>,<span class="pl-k">function</span>() { <span class="pl-k">...</span> });
        <span class="pl-en">after</span>(<span class="pl-k">function</span>() { <span class="pl-k">...</span> });
    })
});</pre></div>

<p>Mocha Suit is complient to Mocha. So <code>this</code> is always Mocha's <code>this</code> object which is accessible inside of all Mocha's setup and test methods when you run them in usual manner.  Also you can use <code>done</code> argument to call methods asyncronously (or return Promise object).</p>

<div class="highlight highlight-source-js"><pre><span class="pl-smi">Suit</span>.<span class="pl-en">before</span>(<span class="pl-k">function</span>(<span class="pl-smi">done</span>) {
  <span class="pl-v">this</span>.<span class="pl-en">timeout</span>(<span class="pl-c1">3000</span>);
  <span class="pl-c1">setTimeout</span>(done,<span class="pl-c1">2000</span>);
});

<span class="pl-smi">Suit</span>.<span class="pl-en">before</span>(<span class="pl-k">function</span>() {
  <span class="pl-k">return</span> <span class="pl-smi">Promise</span>.<span class="pl-en">delay</span>(<span class="pl-c1">2000</span>);
});

<span class="pl-c">/* ----------- will generate ----------- */</span>
<span class="pl-en">before</span>(<span class="pl-k">function</span>(<span class="pl-smi">done</span>) {
  <span class="pl-v">this</span>.<span class="pl-en">timeout</span>(<span class="pl-c1">3000</span>);
  <span class="pl-c1">setTimeout</span>(done,<span class="pl-c1">2000</span>);
});

<span class="pl-en">before</span>(<span class="pl-k">function</span>() {
  <span class="pl-k">return</span> <span class="pl-smi">Promise</span>.<span class="pl-en">delay</span>(<span class="pl-c1">2000</span>);
});</pre></div>

<p>Is that all? Nope. Welcome to the <a href="https://github.com/muonjs/mocha-suit/wiki">wiki</a> for the rest cool stuff.</p>

<h2>
<a id="usage" class="anchor" href="#usage" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Usage</h2>

<p>Mocha Suit depends on Mocha. So you need to initialize Mocha before run your tests. Simplest way is to put your tests in <code>/test/</code> directory and then run <code>mocha</code> from console. Since Suit is just a wrapper you can utilize any mocha options and arguments you want. For more info visit Mocha's <a href="https://github.com/mochajs/mocha/wiki">documentation</a>.</p>

<h2>
<a id="jasmine" class="anchor" href="#jasmine" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Jasmine</h2>

<p>Are you <a href="http://jasmine.github.io/">Jasmine</a> lover and Mocha hater? Superficial difference between Mocha and Jasmine is setup/teardown methods naming. Specifically <code>before</code> is known as <code>beforeAll</code> and <code>after</code> is known as <code>afterAll</code>. Mocha Suit suports both versions. Since Mocha Suit is barely wrapper it has no matter what you do inside of your test code or witch helper library (for ex. spies, assertions or matchers) you use. So next one code should be ok:</p>

<div class="highlight highlight-source-js"><pre><span class="pl-k">var</span> MochaSuit <span class="pl-k">=</span> <span class="pl-c1">require</span>(<span class="pl-s"><span class="pl-pds">"</span>mocha-suit<span class="pl-pds">"</span></span>);
<span class="pl-k">var</span> Suit <span class="pl-k">=</span> <span class="pl-en">MochaSuit</span>(<span class="pl-s"><span class="pl-pds">"</span>Test suit<span class="pl-pds">"</span></span>);
<span class="pl-smi">Suit</span>.<span class="pl-en">before</span>(<span class="pl-k">function</span>() { <span class="pl-k">...</span> }); <span class="pl-c">// won't have effect in jasmine</span>
<span class="pl-smi">Suit</span>.<span class="pl-en">beforeAll</span>(<span class="pl-k">function</span>() { <span class="pl-k">...</span> }); <span class="pl-c">// won't have effect in mocha</span>
<span class="pl-smi">Suit</span>.<span class="pl-en">it</span>(<span class="pl-s"><span class="pl-pds">"</span>test it!<span class="pl-pds">"</span></span>,<span class="pl-k">function</span>() { <span class="pl-k">...</span> });
<span class="pl-smi">Suit</span>.<span class="pl-en">after</span>(<span class="pl-k">function</span>() { <span class="pl-k">...</span> }); <span class="pl-c">// won't have effect in jasmine</span>
<span class="pl-smi">Suit</span>.<span class="pl-en">afterAll</span>(<span class="pl-k">function</span>() { <span class="pl-k">...</span> }); <span class="pl-c">// won't have effect in mocha</span>
<span class="pl-k">new</span> <span class="pl-en">Suit</span>();</pre></div>

<p>Every time test is generated Suit checks whether method exists in global object or not. If <code>beforeAll</code> is absent it won't run. And vice versa.</p>

<p>You can ask me: "Why is library name <em>Mocha</em> Suit? Why not <em>Jasmine</em> Suit or merely <em>Test</em> Suit?". The answer is I don't know Jasmine so well as Mocha. So I suppose some pitfalls may exist. I'll appreciate any help to make Suit to be more universal.</p>

<h2>
<a id="test--contribution" class="anchor" href="#test--contribution" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Test &amp;&amp; Contribution</h2>

<p>To run tests:</p>

<div class="highlight highlight-source-shell"><pre>$ npm <span class="pl-c1">test</span></pre></div>

<p>Since <code>Mocha</code> is dev dependency of Mocha Suit this call envokes <em>mocha</em> under <code>./test/tests</code> directory with options passed to <code>./test/mocha.opts</code>. Alternative way to do the same thing is:</p>

<div class="highlight highlight-source-shell"><pre>$ mocha -R spec <span class="pl-c"># or whatever reporter you like</span></pre></div>

<p>For Jasmine's fans there is <code>./spec/support/jasmine.conf</code> tuning Jasmine to run the same tests inside of alternative environment.</p>

<div class="highlight highlight-source-shell"><pre>$ jasmine</pre></div>

<p>Of course all pull requests are welcomed.</p>

<h2>
<a id="documentation--translation" class="anchor" href="#documentation--translation" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Documentation &amp;&amp; Translation</h2>

<p>Since English isn't my native language I'll appreciate any pull requests with REAME corrections as well as request with translations to any other languages.</p>

<h2>
<a id="license" class="anchor" href="#license" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>License</h2>

<p>This project is distributed under <a href="https://github.com/muonjs/mocha-suit/blob/master/LICENSE">MIT license</a>. 2016.</p>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/muonjs/mocha-suit">Mocha Suit</a> is maintained by <a href="https://github.com/muonjs">muonjs</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
